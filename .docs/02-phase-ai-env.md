# Phase 2: AIç’°å¢ƒæ•´å‚™

> **Phase:** 2/5
> **é›£æ˜“åº¦:** â­ï¸â­ï¸ Medium
> **æœŸé–“:** 1æ—¥ï¼ˆç´„8æ™‚é–“ï¼‰
> **å‰ææ¡ä»¶:** Phase 1å®Œäº†æ¨å¥¨ï¼ˆå¿…é ˆã§ã¯ãªã„ï¼‰

---

## ğŸ¯ Phase 2 ã®ã‚´ãƒ¼ãƒ«

AIé§†å‹•é–‹ç™ºã‚’åŠ é€Ÿã•ã›ã‚‹ãŸã‚ã®**è¦ç´„ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**ã‚’æ•´å‚™ã—ã€ä»¥ä¸‹ã‚’é”æˆã™ã‚‹ï¼š

1. **AGENTS.md**: AI Coding Agentï¼ˆClaude, Cursor, etc.ï¼‰ãŒèª­ã‚€æ¨™æº–è¦æ ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
2. **CLAUDE.md**: Claude Codeå°‚ç”¨ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
3. **`.docs/` é§†å‹•é–‹ç™º**: è©³ç´°ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½“ç³»ã‚’æ§‹ç¯‰

### ãªãœAIç’°å¢ƒæ•´å‚™ãŒé‡è¦ã‹ï¼Ÿ

- ğŸ¤– **AIã®ç²¾åº¦å‘ä¸Š**: æ˜ç¢ºãªè¦ç´„ã«ã‚ˆã‚Šã€AIãŒé©åˆ‡ãªã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
- âš¡ **é–‹ç™ºé€Ÿåº¦UP**: AIãŒæ–‡è„ˆã‚’ç†è§£ã—ã€ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ
- ğŸ“š **çŸ¥è­˜ã®è“„ç©**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è„³ã€ã¨ãªã‚‹
- ğŸ”„ **ä¸€è²«æ€§ã®ä¿æŒ**: ãƒãƒ¼ãƒ ï¼ˆAIå«ã‚€ï¼‰å…¨å“¡ãŒåŒã˜åŸºæº–ã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

---

## ğŸ“‹ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Part 1: AGENTS.md ä½œæˆ â­ï¸ æœ€å„ªå…ˆ

- [ ] AGENTS.md ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- [ ] ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- [ ] ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- [ ] å‘½åè¦å‰‡ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- [ ] ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- [ ] AIå‘ã‘ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³

### Part 2: CLAUDE.md ä½œæˆ

- [ ] CLAUDE.md ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] AGENTS.md ã¸ã®å‚ç…§è¨­å®š
- [ ] é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨˜è¼‰
- [ ] ã‚³ãƒŸãƒƒãƒˆè¦ç´„è¨˜è¼‰
- [ ] Claude Codeå°‚ç”¨ã®æ³¨æ„äº‹é …

### Part 3: .docs/system/ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ ] `.docs/system/project-structure.md` ä½œæˆ
- [ ] `.docs/system/tech-stack.md` ä½œæˆ
- [ ] `.docs/system/data-schema.md` ä½œæˆ

### Part 4: .docs/architecture/ ADR

- [ ] `.docs/architecture/adr-001-pwa-framework.md` ä½œæˆ
- [ ] `.docs/architecture/adr-002-map-library.md` ä½œæˆ
- [ ] `.docs/architecture/design-principles.md` ä½œæˆ

### Part 5: .docs/sop/ æ‰‹é †æ›¸

- [ ] `.docs/sop/development-workflow.md` ä½œæˆ
- [ ] `.docs/sop/deployment.md` ä½œæˆ
- [ ] `.docs/sop/troubleshooting.md` ä½œæˆ

---

## ğŸ“ Part 1: AGENTS.md å®Œå…¨ä»•æ§˜

### AGENTS.md ã¨ã¯ï¼Ÿ

2025å¹´8æœˆã«ç­–å®šã•ã‚ŒãŸ **AI Coding Agent ã®æ¨™æº–è¦æ ¼**ã€‚

å¾“æ¥ã¯ Claudeç”¨ã« `CLAUDE.md`ã€Cursorç”¨ã« `.cursorrules`ã€Windsurfç”¨ã« `.windsurfrules` ãªã©ã€ãƒ„ãƒ¼ãƒ«ã”ã¨ã«ãƒãƒ©ãƒãƒ©ã ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’çµ±ä¸€ã€‚

**AGENTS.md** ãŒã‚ã‚Œã°ã€ã™ã¹ã¦ã®AI AgentãŒã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç†è§£ã™ã‚‹ã€‚

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```markdown
# AGENTS.md

# é³´é–€å¸‚é¿é›£æ‰€ãƒãƒƒãƒ— - AI Agent Instructions

> ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ AI Coding Agentsï¼ˆClaude, Cursor, Windsurf ãªã©ï¼‰å‘ã‘ã®è¦ç´„ã§ã™ã€‚
> äººé–“ã®é–‹ç™ºè€…ã‚‚å‚ç…§ã§ãã¾ã™ãŒã€ä¸»ãªå¯¾è±¡ã¯ AI ã§ã™ã€‚

---

## ğŸ“Œ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå:** Naruto Shelter Map (é³´é–€å¸‚é¿é›£æ‰€ãƒãƒƒãƒ—)

**ç›®çš„:** å¾³å³¶çœŒé³´é–€å¸‚ã®é¿é›£æ‰€ã‚’åœ°å›³ä¸Šã«å¯è¦–åŒ–ã—ã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚åˆ©ç”¨ã§ãã‚‹PWAã‚¢ãƒ—ãƒªã‚’æä¾›

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆ2025å¹´æœ€æ–°ç‰ˆï¼‰:**
- Package Manager: **pnpm 9.x**
- Frontend: Next.js 15 (App Router + Turbopack), React **19**, TypeScript 5
- Styling: Tailwind CSS **v4** (Lightning CSSçµ±åˆ)
- Map: MapLibre GL JS **5.9**
- PWA: next-pwa 5
- State: SWR (ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ), Zustand (ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ã€optional)
- Testing: ãªã—ï¼ˆãƒ†ã‚¹ãƒˆã¯å®Ÿè£…ã—ãªã„ï¼‰
- Linting/Formatting: **Biome** (ESLint+Prettierç½®ãæ›ãˆ)
- Hosting: Cloudflare Pages
- CI/CD: GitHub Actions

**é‡è¦ãªåˆ¶ç´„:**
- Node.js 20.x ä»¥ä¸Š
- **pnpm 9.x ä»¥ä¸Š**å¿…é ˆï¼ˆnpmã¯ä½¿ç”¨ã—ãªã„ï¼‰
- TypeScript Strict Mode å¿…é ˆ
- **Biome** ã«ã‚ˆã‚‹å³æ ¼ãªã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç†
- å®Œå…¨ãªå‹å®‰å…¨æ€§ã‚’ä¿è¨¼ã™ã‚‹ã“ã¨

---

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä»¥ä¸‹ã®æ§‹é€ ã«å¾“ã†ï¼š

```
naruto-shelter-map/
â”œâ”€â”€ .docs/                      # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆAIé§†å‹•é–‹ç™ºï¼‰
â”‚   â”œâ”€â”€ system/                 # ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜
â”‚   â”œâ”€â”€ architecture/           # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®šè¨˜éŒ²
â”‚   â””â”€â”€ sop/                    # æ¨™æº–ä½œæ¥­æ‰‹é †
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ etl.yml             # ãƒ‡ãƒ¼ã‚¿æ›´æ–°è‡ªå‹•åŒ–
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ shelters.geojson    # é¿é›£æ‰€ãƒ‡ãƒ¼ã‚¿
â”‚   â””â”€â”€ icons/                  # PWAã‚¢ã‚¤ã‚³ãƒ³
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ fetch_shelters.ts       # ãƒ‡ãƒ¼ã‚¿å–å¾—ETLã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ globals.css
â”‚   â”‚
â”‚   â”œâ”€â”€ components/             # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ map/
â”‚   â”‚   â”‚   â”œâ”€â”€ Map.tsx
â”‚   â”‚   â”‚   â””â”€â”€ MarkerCluster.tsx
â”‚   â”‚   â”œâ”€â”€ shelter/
â”‚   â”‚   â”‚   â”œâ”€â”€ ShelterList.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ShelterDetail.tsx
â”‚   â”‚   â””â”€â”€ ui/                 # æ±ç”¨UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                  # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ useShelters.ts
â”‚   â”‚   â””â”€â”€ useGeolocation.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ geojson.ts
â”‚   â”‚   â””â”€â”€ maplibre.ts
â”‚   â”‚
â”‚   â””â”€â”€ types/                  # TypeScriptå‹å®šç¾©
â”‚       â””â”€â”€ shelter.ts
â”‚
â”œâ”€â”€ AGENTS.md                   # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ CLAUDE.md                   # Claude Codeè¨­å®š
â””â”€â”€ README.md
```

**ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ãƒ«ãƒ¼ãƒ«:**

1. **`src/app/`**: Next.js App Router ã®ãƒšãƒ¼ã‚¸ã¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
2. **`src/components/`**: å†åˆ©ç”¨å¯èƒ½ãªReactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   - æ©Ÿèƒ½ã”ã¨ã«ãƒ•ã‚©ãƒ«ãƒ€åˆ†å‰²ï¼ˆ`map/`, `shelter/`, `ui/`ï¼‰
3. **`src/hooks/`**: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ï¼ˆ`use` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹å¿…é ˆï¼‰
4. **`src/lib/`**: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
5. **`src/types/`**: TypeScriptå‹å®šç¾©ï¼ˆ`.ts`ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
6. **`public/data/`**: é™çš„ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆGeoJSONï¼‰

---

## ğŸ¨ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### TypeScript

**å¿…é ˆäº‹é …:**
- ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `.ts` ã¾ãŸã¯ `.tsx`
- `any` å‹ã¯ **ç¦æ­¢**ï¼ˆ`unknown` ã‚’ä½¿ç”¨ï¼‰
- `tsconfig.json` ã® `strict: true` ã‚’éµå®ˆ
- æ˜ç¤ºçš„ãªå‹æ³¨é‡ˆã‚’æ¨å¥¨ï¼ˆæ¨è«–ã«é ¼ã‚Šã™ããªã„ï¼‰

**æ¨å¥¨äº‹é …:**
- é–¢æ•°ã®æˆ»ã‚Šå€¤ã«ã¯å‹ã‚’æ˜ç¤º
- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ `interface` ã¾ãŸã¯ `type` ã§å®šç¾©
- Enum ã‚ˆã‚Š Union Types ã‚’å„ªå…ˆ

**ä¾‹:**

```typescript
// âœ… Good
interface Shelter {
  name: string;
  type: 'æŒ‡å®šé¿é›£æ‰€' | 'ç·Šæ€¥é¿é›£å ´æ‰€';
  coordinates: [number, number];
}

function getShelters(): Promise<Shelter[]> {
  // ...
}

// âŒ Bad
function getShelters(): any {
  // ...
}
```

---

### React / Next.js

**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¦ç´„:**

- **é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**ã®ã¿ä½¿ç”¨ï¼ˆã‚¯ãƒ©ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¦æ­¢ï¼‰
- **Server Components** ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã€å¿…è¦ãªå ´åˆã®ã¿ `'use client'`
- Props ã¯ `interface` ã§å‹å®šç¾©
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåã¯ PascalCase
- ãƒ•ã‚¡ã‚¤ãƒ«åã‚‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåã¨ä¸€è‡´ï¼ˆ`Map.tsx`, `ShelterList.tsx`ï¼‰

**ä¾‹:**

```typescript
// src/components/shelter/ShelterList.tsx
'use client';

import { Shelter } from '@/types/shelter';

interface ShelterListProps {
  shelters: Shelter[];
  onSelectShelter: (shelter: Shelter) => void;
}

export function ShelterList({ shelters, onSelectShelter }: ShelterListProps) {
  return (
    <ul>
      {shelters.map((shelter) => (
        <li key={shelter.id} onClick={() => onSelectShelter(shelter)}>
          {shelter.name}
        </li>
      ))}
    </ul>
  );
}
```

**ãƒ•ãƒƒã‚¯è¦ç´„:**

- ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã¯ `use` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹
- `src/hooks/` ã«é…ç½®
- 1ãƒ•ã‚¡ã‚¤ãƒ«1ãƒ•ãƒƒã‚¯

**ä¾‹:**

```typescript
// src/hooks/useShelters.ts
import useSWR from 'swr';
import { Shelter } from '@/types/shelter';

export function useShelters() {
  const { data, error, isLoading } = useSWR<Shelter[]>(
    '/data/shelters.geojson',
    fetcher
  );

  return {
    shelters: data,
    isLoading,
    isError: error,
  };
}
```

---

### Styling

**Tailwind CSS è¦ç´„:**

- ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ã§è¨˜è¿°
- `@apply` ã¯é¿ã‘ã‚‹ï¼ˆç‰¹åˆ¥ãªç†ç”±ãŒãªã„é™ã‚Šï¼‰
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã¯ `sm:`, `md:`, `lg:` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œã¯ `dark:` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹

**ä¾‹:**

```tsx
<div className="flex flex-col gap-4 p-6 md:flex-row md:gap-6">
  <button className="rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 dark:bg-blue-500">
    Click
  </button>
</div>
```

---

### å‘½åè¦å‰‡

| ç¨®é¡ | è¦å‰‡ | ä¾‹ |
|------|------|------|
| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | PascalCase | `Map`, `ShelterList` |
| é–¢æ•° | camelCase | `fetchShelters`, `calculateDistance` |
| å¤‰æ•° | camelCase | `shelterData`, `isLoading` |
| å®šæ•° | UPPER_SNAKE_CASE | `API_ENDPOINT`, `MAX_SHELTERS` |
| å‹/Interface | PascalCase | `Shelter`, `GeoJSONFeature` |
| ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰ | PascalCase | `Map.tsx` |
| ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼‰ | kebab-case | `geojson-utils.ts` |

---

### Importé †åº

```typescript
// 1. React / Next.js
import { useState, useEffect } from 'react';
import Image from 'next/image';

// 2. å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
import maplibregl from 'maplibre-gl';
import useSWR from 'swr';

// 3. å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆçµ¶å¯¾ãƒ‘ã‚¹ @/ ä½¿ç”¨ï¼‰
import { Shelter } from '@/types/shelter';
import { useShelters } from '@/hooks/useShelters';
import { Map } from '@/components/map/Map';

// 4. ç›¸å¯¾ãƒ‘ã‚¹ï¼ˆåŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
import './styles.css';
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

**æ³¨è¨˜:** ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ãƒ†ã‚¹ãƒˆã¯å®Ÿè£…ã—ã¾ã›ã‚“ã€‚æ‰‹å‹•ãƒ†ã‚¹ãƒˆã¨Lighthouseç›£æŸ»ã§å“è³ªã‚’æ‹…ä¿ã—ã¾ã™ã€‚

**ã‚³ãƒãƒ³ãƒ‰:**
```bash
pnpm run e2e
pnpm run e2e:ui
```

---

## ğŸ¤– AI Agentå‘ã‘ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ™‚ã®æ³¨æ„äº‹é …

1. **å‹å®‰å…¨æ€§ã‚’æœ€å„ªå…ˆ**
   - æ¨è«–ã«é ¼ã‚‰ãšã€æ˜ç¤ºçš„ã«å‹ã‚’æ›¸ã
   - `any` ã¯çµ¶å¯¾ã«ä½¿ã‚ãªã„

2. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²**
   - 1ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ = 1è²¬å‹™
   - 100è¡Œã‚’è¶…ãˆãŸã‚‰åˆ†å‰²ã‚’æ¤œè¨

3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
   - éåŒæœŸå‡¦ç†ã¯å¿…ãš `try-catch` ã¾ãŸã¯ `.catch()`
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º

4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’é¿ã‘ã‚‹ï¼ˆ`useMemo`, `useCallback`ï¼‰
   - å¤§ããªãƒªã‚¹ãƒˆã¯ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆreact-windowï¼‰

5. **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**
   - `aria-label` ãªã©ã®å±æ€§ã‚’è¿½åŠ 
   - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œå¯¾å¿œ

### ã‚ˆãã‚ã‚‹è³ªå•

**Q: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’Server Componentã¨Client Componentã®ã©ã¡ã‚‰ã«ã™ã¹ãã‹ï¼Ÿ**
A: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Server Componentã€‚ä»¥ä¸‹ã®å ´åˆã®ã¿Client Componentï¼š
- `useState`, `useEffect` ãªã©ã®ãƒ•ãƒƒã‚¯ã‚’ä½¿ã†
- ãƒ–ãƒ©ã‚¦ã‚¶APIã‚’ä½¿ã†ï¼ˆ`window`, `document`ï¼‰
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªè¦ç´ ï¼ˆ`onClick` ãªã©ï¼‰

**Q: MapLibre GL JSã¯Client Componentã‹Server Componentã‹?**
A: Client Componentï¼ˆ`'use client'` å¿…é ˆï¼‰ã€‚MapLibreã¯ãƒ–ãƒ©ã‚¦ã‚¶APIã«ä¾å­˜ã€‚

**Q: SWRã¨Zustandã®ä½¿ã„åˆ†ã‘ã¯ï¼Ÿ**
A:
- SWR: ã‚µãƒ¼ãƒãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚§ãƒƒãƒãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°
- Zustand: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ã€é¸æŠä¸­ã®é¿é›£æ‰€ãªã©ï¼‰

---

## ğŸ“š å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

å¿…è¦ã«å¿œã˜ã¦ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ï¼š

- [.docs/system/project-structure.md](/.docs/system/project-structure.md)
- [.docs/system/tech-stack.md](/.docs/system/tech-stack.md)
- [.docs/architecture/design-principles.md](/.docs/architecture/design-principles.md)

---

**é‡è¦:** ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ç”ŸããŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒé€²åŒ–ã—ãŸã‚‰æ›´æ–°ã—ã¦ãã ã•ã„ã€‚
```

---

## ğŸ“ Part 2: CLAUDE.md å®Œå…¨ä»•æ§˜

### CLAUDE.md ã¨ã¯ï¼Ÿ

Claude Code ãŒ**ä¼šè©±é–‹å§‹æ™‚ã«è‡ªå‹•çš„ã«èª­ã¿è¾¼ã‚€**è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€‚

AGENTS.md ã‚ˆã‚Šã‚‚Claudeç‰¹æœ‰ã®è¨­å®šã‚’è¨˜è¿°ã™ã‚‹ã€‚

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```markdown
# CLAUDE.md

# Claude Code - Project Configuration

> ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ Claude Code å°‚ç”¨ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
> Claude Code ãŒä¼šè©±é–‹å§‹æ™‚ã«è‡ªå‹•çš„ã«ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚

---

## ğŸ“– åŸºæœ¬æ–¹é‡

### AGENTS.md ã‚’æœ€å„ªå…ˆã§å‚ç…§

ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã¯ **AGENTS.md** ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

**Claude Code ã¯ AGENTS.md ã®ãƒ«ãƒ¼ãƒ«ã«å³å¯†ã«å¾“ã£ã¦ãã ã•ã„ã€‚**

[AGENTS.md ã‚’ç¢ºèªã™ã‚‹](./AGENTS.md)

---

## ğŸš€ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### 1. ã‚¿ã‚¹ã‚¯é–‹å§‹æ™‚

Claude Code ãŒã‚¿ã‚¹ã‚¯ã‚’å—ã‘å–ã£ãŸã‚‰ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

1. **é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèª**
   - `.docs/` é…ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€
   - ç‰¹ã« `architecture/` ã¨ `sop/` ã‚’å‚ç…§

2. **æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‚’ç†è§£**
   - é¡ä¼¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ¤œç´¢
   - å‘½åè¦å‰‡ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¸è¥²

3. **TDDæ¨å¥¨**
   - å®Ÿè£… â†’ æ‰‹å‹•ãƒ†ã‚¹ãƒˆ â†’ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

### 2. ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ™‚

- **å‹å®‰å…¨æ€§ã‚’æœ€å„ªå…ˆ**
  - `any` å‹ã¯çµ¶å¯¾ã«ä½¿ã‚ãªã„
  - ã™ã¹ã¦ã®é–¢æ•°ã«æˆ»ã‚Šå€¤ã®å‹ã‚’æ˜ç¤º

- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²**
  - 1ãƒ•ã‚¡ã‚¤ãƒ«100è¡Œä»¥å†…ã‚’æ¨å¥¨
  - è²¬å‹™ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã¯åˆ†å‰²

- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
  - éåŒæœŸå‡¦ç†ã«ã¯å¿…ãš `try-catch`
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

### 3. ã‚³ãƒŸãƒƒãƒˆå‰

- [ ] ESLint ã‚¨ãƒ©ãƒ¼ 0ä»¶
- [ ] Prettier ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿
- [ ] TypeScript å‹ã‚¨ãƒ©ãƒ¼ 0ä»¶
- [ ] ãƒ†ã‚¹ãƒˆåˆæ ¼

---

## ğŸ’¬ ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„

### Conventional Commits ã«å¾“ã†

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type:**
- `feat`: æ–°æ©Ÿèƒ½
- `fix`: ãƒã‚°ä¿®æ­£
- `docs`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `style`: ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆã‚³ãƒ¼ãƒ‰å‹•ä½œã«å½±éŸ¿ãªã—ï¼‰
- `refactor`: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- `chore`: ãã®ä»–ã®å¤‰æ›´
- `chore`: ãƒ“ãƒ«ãƒ‰ã€è¨­å®šå¤‰æ›´

**ä¾‹:**

```
feat(map): Add MapLibre cluster support

- Implemented marker clustering for better performance
- Added zoom controls
- Fixed marker icon size on mobile

Closes #42
```

---

## ğŸ› ï¸ Claude Codeç‰¹æœ‰ã®æ³¨æ„äº‹é …

### ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆãƒ»ç·¨é›†æ™‚

- **æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¿…ãšå…ˆã«èª­ã‚€**
  - Edit tool ã‚’ä½¿ã†å‰ã« Read tool ã§ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’ç¢ºèª

- **ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã¯çµ¶å¯¾ãƒ‘ã‚¹**
  - `@/` ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ç”¨ï¼ˆ`tsconfig.json` ã§è¨­å®šæ¸ˆã¿ï¼‰
  - ä¾‹: `import { Shelter } from '@/types/shelter';`

- **å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã¯åˆ†å‰²ã—ã¦ææ¡ˆ**
  - 1åº¦ã«å¤§é‡ã®ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã›ãšã€æ®µéšçš„ã«å®Ÿè£…

### ãƒ‡ãƒãƒƒã‚°æ™‚

- **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¸å¯§ã«èª­ã‚€**
  - TypeScript ã‚¨ãƒ©ãƒ¼ã¯å‹å®šç¾©ã®å•é¡ŒãŒå¤šã„
  - ESLint ã‚¨ãƒ©ãƒ¼ã¯è¦ç´„é•å

- **console.log ã¯é–‹ç™ºæ™‚ã®ã¿**
  - æœ¬ç•ªã‚³ãƒ¼ãƒ‰ã«ã¯æ®‹ã•ãªã„
  - ãƒ‡ãƒãƒƒã‚°å¾Œã¯å‰Šé™¤

---

## ğŸ“‚ é‡è¦ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã‚¿ã‚¹ã‚¯ã«å¿œã˜ã¦ä»¥ä¸‹ã‚’å‚ç…§ï¼š

### ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜
- [.docs/system/project-structure.md](./.docs/system/project-structure.md)
- [.docs/system/tech-stack.md](./.docs/system/tech-stack.md)
- [.docs/system/data-schema.md](./.docs/system/data-schema.md)

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- [.docs/architecture/adr-001-pwa-framework.md](./.docs/architecture/adr-001-pwa-framework.md)
- [.docs/architecture/adr-002-map-library.md](./.docs/architecture/adr-002-map-library.md)
- [.docs/architecture/design-principles.md](./.docs/architecture/design-principles.md)

### ä½œæ¥­æ‰‹é †
- [.docs/sop/development-workflow.md](./.docs/sop/development-workflow.md)
- [.docs/sop/deployment.md](./.docs/sop/deployment.md)
- [.docs/sop/troubleshooting.md](./.docs/sop/troubleshooting.md)

---

## âœ¨ Claude Code ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **è³ªå•ã‚’æã‚Œãªã„**
   - æ›–æ˜§ãªæŒ‡ç¤ºãŒã‚ã‚Œã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèª

2. **æ®µéšçš„ã«å®Ÿè£…**
   - MVP â†’ æ©Ÿèƒ½è¿½åŠ  â†’ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°**
   - ã‚³ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã¯ `.docs/` ã‚‚æ›´æ–°

4. **æ‰‹å‹•ãƒ†ã‚¹ãƒˆ**
   - å®Ÿè£…å¾Œã¯å¿…ãšæ‰‹å‹•ã§å‹•ä½œç¢ºèªã‚’è¡Œã†

---

**æœ€å¾Œã«:** ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„ã¯ã€Œé›»æ³¢ãŒãªãã¦ã‚‚é¿é›£æ‰€ãŒã‚ã‹ã‚‹ã€ã“ã¨ã€‚
ã‚³ãƒ¼ãƒ‰ã®å“è³ªã ã‘ã§ãªãã€**ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**ã‚’æœ€å„ªå…ˆã«è€ƒãˆã¦ãã ã•ã„ã€‚
```

---

## ğŸ“‚ Part 3-5: .docs/ é…ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹æˆ

### Part 3: .docs/system/

#### `project-structure.md`
- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ„ãƒªãƒ¼ã®å®Œå…¨ç‰ˆ
- å„ãƒ•ã‚©ãƒ«ãƒ€ã®å½¹å‰²èª¬æ˜
- ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ãƒ«ãƒ¼ãƒ«

#### `tech-stack.md`
- å„æŠ€è¡“ã®è©³ç´°èª¬æ˜
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±
- ãªãœãã®æŠ€è¡“ã‚’é¸ã‚“ã ã‹

#### `data-schema.md`
- GeoJSON ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
- TypeScriptå‹å®šç¾©
- ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ«ãƒ¼ãƒ«

---

### Part 4: .docs/architecture/

#### `adr-001-pwa-framework.md`ï¼ˆADR = Architecture Decision Recordï¼‰
```markdown
# ADR 001: PWAãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®é¸å®š

## ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
æ‰¿èªæ¸ˆã¿

## ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œã®PWAã‚’æ§‹ç¯‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

## æ±ºå®š
Next.js + next-pwa ã‚’æ¡ç”¨ã€‚

## ç†ç”±
- Next.js 15 ã® App Router ãŒå®‰å®š
- next-pwa ãŒ Service Worker ã‚’è‡ªå‹•ç”Ÿæˆ
- Cloudflare Pages ãŒ Next.js ã‚’ã‚µãƒãƒ¼ãƒˆ

## çµæœ
- é–‹ç™ºé€Ÿåº¦ãŒå‘ä¸Š
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œãŒå®¹æ˜“
```

#### `adr-002-map-library.md`
MapLibre GL JS ã‚’é¸ã‚“ã ç†ç”±ï¼ˆMapbox GL JSã§ã¯ãªãï¼‰

#### `design-principles.md`
è¨­è¨ˆæ€æƒ³ãƒ»åŸå‰‡

---

### Part 5: .docs/sop/

#### `development-workflow.md`
- ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥
- PRä½œæˆæ‰‹é †
- ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹

#### `deployment.md`
- Cloudflare Pages è¨­å®š
- ç’°å¢ƒå¤‰æ•°è¨­å®š
- ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

#### `troubleshooting.md`
- ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–
- ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

---

## ğŸ¯ å®Ÿè£…ã®å„ªå…ˆé †ä½

### æœ€å„ªå…ˆï¼ˆå¿…é ˆï¼‰

1. âœ… `AGENTS.md` ä½œæˆ
2. âœ… `CLAUDE.md` ä½œæˆ

### é«˜å„ªå…ˆï¼ˆæ¨å¥¨ï¼‰

3. `.docs/system/project-structure.md`
4. `.docs/system/data-schema.md`
5. `.docs/architecture/design-principles.md`

### ä¸­å„ªå…ˆï¼ˆã‚ã‚‹ã¨è‰¯ã„ï¼‰

6. `.docs/system/tech-stack.md`
7. `.docs/architecture/adr-001-pwa-framework.md`
8. `.docs/architecture/adr-002-map-library.md`

### ä½å„ªå…ˆï¼ˆå¾Œå›ã—å¯ï¼‰

9. `.docs/sop/development-workflow.md`
10. `.docs/sop/deployment.md`
11. `.docs/sop/troubleshooting.md`

---

## ğŸš€ Phase 2 å®Œäº†å¾Œ

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [ ] AGENTS.md ã¨ CLAUDE.md ãŒæ­£ã—ãæ©Ÿèƒ½ã™ã‚‹ã‹ç¢ºèª
- [ ] Claude Code ã‚’å†èµ·å‹•ã—ã¦ã€CLAUDE.md ãŒè‡ªå‹•èª­ã¿è¾¼ã¿ã•ã‚Œã‚‹ã‹ç¢ºèª
- [ ] `.docs/` é…ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å¿…è¦ã«å¿œã˜ã¦è¿½åŠ 
- [ ] **Phase 3: é–‹ç™ºç’°å¢ƒæ•´å‚™** ã«é€²ã‚€

### ç¢ºèªé …ç›®

- [ ] AGENTS.md ãŒå­˜åœ¨ã—ã€AI AgentãŒèª­ã¿å–ã‚Šå¯èƒ½
- [ ] CLAUDE.md ãŒå­˜åœ¨ã—ã€Claude Code ãŒè‡ªå‹•èª­ã¿è¾¼ã¿
- [ ] `.docs/` ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ãŒæ•´å‚™ã•ã‚Œã¦ã„ã‚‹
- [ ] å„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒç›¸äº’ãƒªãƒ³ã‚¯ã•ã‚Œã¦ã„ã‚‹

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

### AGENTS.md

- [Builder.io - AGENTS.md Best Practices](https://www.builder.io/blog/agents-md)
- [Medium - AGENTS.md: The New README for AI](https://medium.com/@algorythmos/agents-md-the-new-readme-for-ai-coding-agents-713828c5c63b)

### Architecture Decision Records

- [ADR GitHub](https://adr.github.io/)
- [ADR Template](https://github.com/joelparkerhenderson/architecture-decision-record)

### Docs-Driven Development

- [Documentation-Driven Development](https://medium.com/lifefunk/documentation-driven-development-how-good-docs-become-your-ai-pair-programming-superpower-e0e574db2f3b)

---

**Next:** [Phase 3: é–‹ç™ºç’°å¢ƒæ•´å‚™](./03-phase-dev-env.md)
**Back:** [Phase 1: READMEæ›´æ–°](./01-phase-readme.md)
