@import 'tailwindcss';

@theme {
  /* カスタムカラーパレット（避難所マップ用） */
  --color-primary-500: oklch(0.55 0.15 250);
  --color-primary-600: oklch(0.5 0.18 250);
  --color-primary-700: oklch(0.45 0.2 250);

  /* 避難所種別カラー */
  --color-shelter-designated: oklch(0.55 0.15 250); /* 指定避難所: 青 */
  --color-shelter-emergency: oklch(0.55 0.22 25); /* 緊急避難場所: 赤 */
  --color-shelter-both: oklch(0.55 0.18 290); /* 両方: 紫 */
}

@layer base {
  html {
    @apply antialiased;
    /* システム設定（prefers-color-scheme）に対応 */
    color-scheme: light dark;
  }

  body {
    @apply bg-white text-gray-900;
    /* ダークモード時の背景色とテキスト色 */
    @apply dark:bg-gray-900 dark:text-gray-100;
    /* スムーズなトランジション */
    transition: background-color 0.2s ease, color 0.2s ease;
  }

  /* リンクのデフォルトスタイル */
  a:not(.skip-link):not([class*='maplibre']) {
    @apply underline underline-offset-2;
    @apply text-blue-600 hover:text-blue-700;
    @apply dark:text-blue-400 dark:hover:text-blue-300;
  }

  /* リンクのフォーカススタイル */
  a:focus-visible {
    @apply outline-none ring-2 ring-blue-500 ring-offset-2;
    @apply dark:ring-blue-400;
  }

  /* 地図コンテナのCLS対策 */
  .map-container {
    contain: layout style paint;
    content-visibility: auto;
  }
}

/* MapLibre Popup カスタムスタイル */
.maplibregl-popup-content {
  @apply rounded-lg shadow-lg bg-white;
  @apply dark:bg-gray-800 dark:text-gray-100;
  padding: 0 !important;
}

.maplibregl-popup-tip {
  display: none;
}

.shelter-popup .maplibregl-popup-close-button {
  @apply text-gray-400 hover:text-gray-600;
  @apply dark:text-gray-500 dark:hover:text-gray-300;
  font-size: 20px;
  padding: 8px;
}

/* モバイルでナビゲーションコントロールを非表示 */
@media (max-width: 1023px) {
  .maplibregl-ctrl-top-right {
    display: none !important;
  }
}
