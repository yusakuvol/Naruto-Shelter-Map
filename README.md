# é³´é–€å¸‚é¿é›£æ‰€ãƒãƒƒãƒ— (Naruto Shelter Map)

[![Deploy to Cloudflare Pages](https://img.shields.io/badge/deploy-cloudflare-orange)](https://pages.cloudflare.com)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![pnpm](https://img.shields.io/badge/pnpm-9.x-orange)](https://pnpm.io/)
[![Next.js](https://img.shields.io/badge/Next.js-16-black)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-19-blue)](https://react.dev/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue)](https://www.typescriptlang.org/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-v4-38bdf8)](https://tailwindcss.com/)
[![MapLibre GL JS](https://img.shields.io/badge/MapLibre-5.13-blue)](https://maplibre.org/)

## æ¦‚è¦

å¾³å³¶çœŒé³´é–€å¸‚ã®å…¬çš„é¿é›£æ‰€ã‚’åœ°å›³ä¸Šã«å¯è¦–åŒ–ã—ã€**ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç’°å¢ƒã§ã‚‚é¿é›£æƒ…å ±ã‚’ç¢ºèªã§ãã‚‹** Progressive Web App (PWA) ã§ã™ã€‚

å›½åœŸåœ°ç†é™¢ãƒ»å›½åœŸäº¤é€šçœã®ã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã—ã€åœ°å›³ä¸Šã«é¿é›£æ‰€ã®ä½ç½®ãƒ»ç¨®åˆ¥ãƒ»ç½å®³å¯¾å¿œæƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã‘ã°ã€é›»æ³¢ãŒãªã„çŠ¶æ³ã§ã‚‚æœ€å¾Œã«é–²è¦§ã—ãŸåœ°å›³ç¯„å›²ã¨é¿é›£æ‰€æƒ…å ±ã‚’ä¿æŒã§ãã¾ã™ã€‚

ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç’°å¢ƒã§ã‚‚å‹•ä½œã™ã‚‹PWAæŠ€è¡“ã«ã‚ˆã‚Šã€ã„ã¤ã§ã‚‚é¿é›£æ‰€æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™ã€‚

> **ãƒ‡ãƒ¢ã‚µã‚¤ãƒˆ:** https://naruto-shelter-map.pages.dev
>
> [![ãƒ‡ãƒ¢ã‚µã‚¤ãƒˆã‚’é–‹ã](https://img.shields.io/badge/ğŸŒ_ãƒ‡ãƒ¢ã‚µã‚¤ãƒˆ-Open-blue?style=for-the-badge)](https://naruto-shelter-map.pages.dev)

---

## ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [ä¸»ãªæ©Ÿèƒ½](#ä¸»ãªæ©Ÿèƒ½)
- [ãƒ‡ãƒ¼ã‚¿æ§‹é€ ](#ãƒ‡ãƒ¼ã‚¿æ§‹é€ )
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
- [ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒ•ãƒ­ãƒ¼](#ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒ•ãƒ­ãƒ¼)
- [ãƒ©ã‚¤ã‚»ãƒ³ã‚¹](#ãƒ©ã‚¤ã‚»ãƒ³ã‚¹)

---

## ä¸»ãªæ©Ÿèƒ½

- ğŸ“ **é¿é›£æ‰€ã®ä½ç½®è¡¨ç¤º** - é³´é–€å¸‚å†…ã®æŒ‡å®šé¿é›£æ‰€ãƒ»ç·Šæ€¥é¿é›£å ´æ‰€ã‚’åœ°å›³ä¸Šã«ãƒãƒ¼ã‚«ãƒ¼è¡¨ç¤º
- ğŸŒ **ã‚ªãƒ³ãƒ©ã‚¤ãƒ³/ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ** - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ™‚ã¯æœ€æ–°ãƒ‡ãƒ¼ã‚¿å–å¾—ã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿åˆ©ç”¨
- ğŸ“¶ **å®Œå…¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œ** - Service Worker ã«ã‚ˆã‚Šåœ°å›³ã‚¿ã‚¤ãƒ«ã‚‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ğŸ” **é¿é›£æ‰€æ¤œç´¢** - åå‰ãƒ»ä½æ‰€ãƒ»ç½å®³ç¨®åˆ¥ã§æ¤œç´¢å¯èƒ½
- ğŸ“± **PWAå¯¾å¿œ** - ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¦ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«ä½¿ç”¨å¯èƒ½
- ğŸ—ºï¸ **MapLibre GL JS** - ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹åœ°å›³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§é«˜é€Ÿãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- â™¿ **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£** - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œãƒ»ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ

---

## ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

é¿é›£æ‰€ãƒ‡ãƒ¼ã‚¿ã¯ **GeoJSON å½¢å¼** ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [134.609, 34.173]
      },
      "properties": {
        "name": "â—‹â—‹å°å­¦æ ¡",
        "type": "æŒ‡å®šé¿é›£æ‰€",
        "address": "å¾³å³¶çœŒé³´é–€å¸‚â—‹â—‹ç”º1-1",
        "disaster_types": ["æ´ªæ°´", "æ´¥æ³¢"],
        "capacity": 800,
        "source": "å›½åœŸåœ°ç†é™¢ã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿",
        "updated_at": "2025-10-15"
      }
    }
  ]
}
```

---

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦ãªç’°å¢ƒ

- Node.js 20.x ä»¥ä¸Š
- **pnpm 9.x ä»¥ä¸Š**

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

1. **ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³**

```bash
git clone https://github.com/[your-username]/naruto-shelter-map.git
cd naruto-shelter-map
```

2. **pnpm ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆï¼‰**

```bash
npm install -g pnpm
```

3. **ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
pnpm install
```

4. **ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š**

```bash
cp .env.example .env.local
```

5. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•**

```bash
pnpm dev
```

6. **ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª**

```
http://localhost:3000
```

### ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|---------|------|
| `pnpm dev` | é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆTurbopackï¼‰ |
| `pnpm build` | ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰ |
| `pnpm start` | ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼èµ·å‹• |
| `pnpm lint` | Biome Lint ãƒã‚§ãƒƒã‚¯ |
| `pnpm format` | Biome ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ |
| `pnpm type-check` | TypeScript å‹ãƒã‚§ãƒƒã‚¯ |

---

## ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒ•ãƒ­ãƒ¼

```mermaid
graph LR
    A[å›½åœŸåœ°ç†é™¢API] -->|æ¯é€±æœˆæ›œ 3:00 JST| B[GitHub Actions]
    B -->|ETLã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ| C[é³´é–€å¸‚ãƒ‡ãƒ¼ã‚¿æŠ½å‡º]
    C -->|GeoJSONç”Ÿæˆ| D[public/data/shelters.geojson]
    D -->|Git Commit & Push| E[GitHub Repository]
    E -->|è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤| F[Cloudflare Pages]
    F -->|CDNé…ä¿¡| G[ãƒ¦ãƒ¼ã‚¶ãƒ¼]
    G -->|Service Worker| H[ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥]
```

### è‡ªå‹•æ›´æ–°ã®ä»•çµ„ã¿

1. **æ¯é€±æœˆæ›œ 3:00 JST** ã« GitHub Actions ãŒèµ·å‹•
2. å›½åœŸåœ°ç†é™¢APIã‹ã‚‰æœ€æ–°ã®é¿é›£æ‰€ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
3. é³´é–€å¸‚ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’æŠ½å‡ºãƒ»æ­£è¦åŒ–
4. `public/data/shelters.geojson` ã‚’æ›´æ–°
5. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ & ãƒ—ãƒƒã‚·ãƒ¥
6. Cloudflare Pages ãŒè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
7. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®Service WorkerãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ›´æ–°

> **Note:** ç·Šæ€¥æ™‚ï¼ˆç½å®³ç™ºç”Ÿæ™‚ãªã©ï¼‰ã¯æ‰‹å‹•ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œå¯èƒ½

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

Copyright (c) 2025 Yusaku Matsukawa

è©³ç´°ã¯ [LICENSE](./LICENSE) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### ãƒ‡ãƒ¼ã‚¿å‡ºå…¸

- **é¿é›£æ‰€ãƒ‡ãƒ¼ã‚¿:** [å›½åœŸåœ°ç†é™¢ æŒ‡å®šç·Šæ€¥é¿é›£å ´æ‰€ãƒ‡ãƒ¼ã‚¿](https://www.gsi.go.jp/bousaichiri/hinanbasho.html)
- **åœ°å›³ã‚¿ã‚¤ãƒ«:** MapLibre Demo Tiles / [OpenStreetMap contributors](https://www.openstreetmap.org/copyright)

